<!DOCTYPE html>
<html lang="en">
<html>
  <head>
    <title>Add new project</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../css/add-project.css">
    <script>
        var gui = require('nw.gui');
        var win = gui.Window.get();
        // win.showDevTools();
    </script>
  </head>
  <body>
      <header>Add new project</header>
      <div class="project-form">
          <form id="form">
              <input type="text" id="name" required>
              <input type="file" id="location" webkitdirectory required>
              <input type="file" id="icon" required>
              <input type="submit" value="Add" id="add">
              <input type="submit" formnovalidate value="Cancel" id="cancel">
          </form>
      </div>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="../js/storedb.js"></script>
    <script>
        $("#add").on('click', function() {
            if($("#form")[0].checkValidity()) {
                storedb('projects').insert(
                    {"name":$("#name").val(),"location":$("#location").val(),"icon":$("#icon").val()},
                    function(err,result){
                        if(!err) {
                            win.hide();
                            win.emit('add');
                        } else alert('there was an error');
                });
            }
        });
        $("#cancel").on('click', function() {
            win.hide();
        });
    </script>
  </body>
</html>
